[gd_scene load_steps=33 format=2]

[ext_resource path="res://assets/computer.png" type="Texture" id=1]
[ext_resource path="res://assets/peg-sheet.png" type="Texture" id=2]
[ext_resource path="res://assets/computer-glade.png" type="Texture" id=3]
[ext_resource path="res://assets/cockpit.png" type="Texture" id=4]
[ext_resource path="res://godot/theme.tres" type="Theme" id=5]
[ext_resource path="res://music/travel_spooky.mp3" type="AudioStream" id=6]
[ext_resource path="res://music/556369__nox-sound__foley-object-fridge-motor-humming-loop-mono-ntg4.wav" type="AudioStream" id=7]
[ext_resource path="res://music/189630__elliott-klein__spark.wav" type="AudioStream" id=8]
[ext_resource path="res://music/94132__bmaczero__spark.wav" type="AudioStream" id=9]
[ext_resource path="res://assets/light.png" type="Texture" id=10]

[sub_resource type="Shader" id=8]
code = "shader_type canvas_item;

uniform vec4 bg_color: hint_color;

float rand(vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
}

void fragment() {
	float size = 20.0;
	float prob = 0.995;
	vec2 pos = floor(1.0 / size * FRAGCOORD.xy);
	float color = 0.0;
	float starValue = rand(pos);

	if (starValue > prob)
	{
		vec2 center = size * pos + vec2(size, size) * 0.5;
		float t = 0.9 + 0.2 * sin(TIME * 8.0 + (starValue - prob) / (1.0 - prob) * 45.0);
		color = 1.0 - distance(FRAGCOORD.xy, center) / (0.5 * size);
		color = color * t / (abs(FRAGCOORD.y - center.y)) * t / (abs(FRAGCOORD.x - center.x));
	}
	else if (rand(SCREEN_UV.xy / 20.0) > 0.996)
	{
		float r = rand(SCREEN_UV.xy);
		color = r * (0.85 * sin(TIME * (r * 5.0) + 720.0 * r) + 0.95);
	}
	COLOR = vec4(vec3(color),1.0) + bg_color;
}"

[sub_resource type="ShaderMaterial" id=32]
shader = SubResource( 8 )
shader_param/bg_color = Color( 0.105882, 0.121569, 0.129412, 1 )

[sub_resource type="Shader" id=30]
code = "shader_type canvas_item;

uniform float lod: hint_range(0.0, 5) = 0.0;

void fragment(){
	vec4 color = texture(SCREEN_TEXTURE, SCREEN_UV, lod);
	COLOR = color;
}"

[sub_resource type="ShaderMaterial" id=31]
shader = SubResource( 30 )
shader_param/lod = 1.068

[sub_resource type="Curve" id=28]
_data = [ Vector2( 0, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.110795, 1 ), -9.65106, -9.65106, 0, 0, Vector2( 0.278409, 0 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="CurveTexture" id=29]
curve = SubResource( 28 )

[sub_resource type="ParticlesMaterial" id=27]
flag_disable_z = true
spread = 180.0
gravity = Vector3( 0, 250, 0 )
initial_velocity = 200.0
initial_velocity_random = 1.0
orbit_velocity = 0.0
orbit_velocity_random = 0.0
scale = 2.0
scale_curve = SubResource( 29 )
color = Color( 1, 0.933333, 0.513726, 1 )

[sub_resource type="Animation" id=33]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("../AudioStreamPlayer3:playing")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ false ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("../AudioStreamPlayer3:stream")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ ExtResource( 8 ) ]
}

[sub_resource type="Animation" id=34]
resource_name = "spark"
length = 12.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("../AudioStreamPlayer3:playing")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 6 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ true, true ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("../AudioStreamPlayer3:stream")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 5.9, 7 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ ExtResource( 9 ), ExtResource( 8 ) ]
}

[sub_resource type="AtlasTexture" id=20]
atlas = ExtResource( 2 )
region = Rect2( 0, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=21]
atlas = ExtResource( 2 )
region = Rect2( 16, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=22]
atlas = ExtResource( 2 )
region = Rect2( 32, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=23]
atlas = ExtResource( 2 )
region = Rect2( 48, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=24]
atlas = ExtResource( 2 )
region = Rect2( 64, 0, 16, 16 )

[sub_resource type="AtlasTexture" id=25]
atlas = ExtResource( 2 )
region = Rect2( 80, 0, 16, 16 )

[sub_resource type="SpriteFrames" id=26]
animations = [ {
"frames": [ SubResource( 20 ), SubResource( 21 ), SubResource( 22 ), SubResource( 23 ), SubResource( 24 ), SubResource( 25 ) ],
"loop": true,
"name": "default",
"speed": 5.0
} ]

[sub_resource type="Animation" id=35]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:texture_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.09 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1.0 ]
}

[sub_resource type="Animation" id=36]
resource_name = "flash"
length = 2.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:texture_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.09, 0.1 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 1.0, 0.39 ]
}

[sub_resource type="Animation" id=37]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:texture_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.09 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1.0 ]
}

[sub_resource type="Animation" id=38]
resource_name = "flash"
length = 2.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:texture_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.09, 0.1 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 1.0, 0.39 ]
}

[sub_resource type="Animation" id=39]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:texture_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.09 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1.0 ]
}

[sub_resource type="Animation" id=40]
resource_name = "flash"
length = 2.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:texture_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.72, 0.71 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:energy")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 1.0, 0.39 ]
}

[node name="Node2D" type="Node2D"]

[node name="Space" type="Panel" parent="."]
material = SubResource( 32 )
margin_top = -384.0
margin_right = 2112.0
margin_bottom = 876.0
theme = ExtResource( 5 )

[node name="H98Ct9Hz24K41" type="Sprite" parent="."]
position = Vector2( 1060, 248 )
scale = Vector2( 2.65642, 2.41892 )
texture = ExtResource( 4 )

[node name="Panel" type="Panel" parent="."]
visible = false
material = SubResource( 31 )
margin_right = 960.0
margin_bottom = 544.0

[node name="Computer" type="Sprite" parent="."]
position = Vector2( 480, 272 )
texture = ExtResource( 1 )

[node name="Particles2D" type="Particles2D" parent="."]
position = Vector2( 108, 20 )
amount = 50
lifetime = 6.0
explosiveness = 1.0
process_material = SubResource( 27 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Particles2D"]
autoplay = "spark"
anims/RESET = SubResource( 33 )
anims/spark = SubResource( 34 )

[node name="Computer2" type="Sprite" parent="."]
modulate = Color( 1, 1, 1, 0.568627 )
position = Vector2( 480, 272 )
texture = ExtResource( 3 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="."]
position = Vector2( 536, 272 )
frames = SubResource( 26 )
playing = true

[node name="AnimatedSprite2" type="AnimatedSprite" parent="."]
position = Vector2( 512, 272 )
frames = SubResource( 26 )
playing = true

[node name="AnimatedSprite3" type="AnimatedSprite" parent="."]
position = Vector2( 488, 272 )
frames = SubResource( 26 )
frame = 5
playing = true

[node name="AnimatedSprite4" type="AnimatedSprite" parent="."]
position = Vector2( 560, 272 )
frames = SubResource( 26 )
frame = 5
playing = true

[node name="AnimatedSprite5" type="AnimatedSprite" parent="."]
position = Vector2( 584, 272 )
frames = SubResource( 26 )
frame = 4
playing = true

[node name="AnimatedSprite6" type="AnimatedSprite" parent="."]
position = Vector2( 536, 296 )
frames = SubResource( 26 )
frame = 4
playing = true

[node name="AnimatedSprite7" type="AnimatedSprite" parent="."]
position = Vector2( 536, 320 )
frames = SubResource( 26 )
frame = 4
playing = true

[node name="AnimatedSprite8" type="AnimatedSprite" parent="."]
position = Vector2( 536, 248 )
frames = SubResource( 26 )
frame = 3
playing = true

[node name="AnimatedSprite9" type="AnimatedSprite" parent="."]
position = Vector2( 536, 224 )
frames = SubResource( 26 )
frame = 3
playing = true

[node name="AnimatedSprite10" type="AnimatedSprite" parent="."]
position = Vector2( 512, 248 )
frames = SubResource( 26 )
frame = 3
playing = true

[node name="AnimatedSprite11" type="AnimatedSprite" parent="."]
position = Vector2( 560, 248 )
frames = SubResource( 26 )
frame = 2
playing = true

[node name="AnimatedSprite12" type="AnimatedSprite" parent="."]
position = Vector2( 560, 296 )
frames = SubResource( 26 )
frame = 2
playing = true

[node name="AnimatedSprite13" type="AnimatedSprite" parent="."]
position = Vector2( 512, 296 )
frames = SubResource( 26 )
frame = 1
playing = true

[node name="AnimatedSprite14" type="AnimatedSprite" parent="."]
position = Vector2( 488, 296 )
frames = SubResource( 26 )
playing = true

[node name="AnimatedSprite15" type="AnimatedSprite" parent="."]
position = Vector2( 584, 296 )
frames = SubResource( 26 )
playing = true

[node name="AnimatedSprite16" type="AnimatedSprite" parent="."]
position = Vector2( 584, 248 )
frames = SubResource( 26 )
frame = 5
playing = true

[node name="AnimatedSprite17" type="AnimatedSprite" parent="."]
position = Vector2( 488, 248 )
frames = SubResource( 26 )
frame = 5
playing = true

[node name="AnimatedSprite18" type="AnimatedSprite" parent="."]
position = Vector2( 512, 224 )
frames = SubResource( 26 )
frame = 5
playing = true

[node name="AnimatedSprite19" type="AnimatedSprite" parent="."]
position = Vector2( 560, 224 )
frames = SubResource( 26 )
frame = 4
playing = true

[node name="AnimatedSprite20" type="AnimatedSprite" parent="."]
position = Vector2( 512, 320 )
frames = SubResource( 26 )
frame = 4
playing = true

[node name="AnimatedSprite21" type="AnimatedSprite" parent="."]
position = Vector2( 560, 320 )
frames = SubResource( 26 )
frame = 3
playing = true

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2( 568, 272 )
current = true

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 6 )
volume_db = -6.0
autoplay = true

[node name="AudioStreamPlayer2" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 7 )
volume_db = -7.685
autoplay = true

[node name="AudioStreamPlayer3" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 8 )
volume_db = -7.685

[node name="Light2D" type="Light2D" parent="."]
position = Vector2( 405, 53 )
texture = ExtResource( 10 )
texture_scale = 0.09
color = Color( 0.901961, 0.270588, 0.223529, 1 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Light2D"]
autoplay = "flash"
anims/RESET = SubResource( 35 )
anims/flash = SubResource( 36 )

[node name="Light2D2" type="Light2D" parent="."]
position = Vector2( 338, 53 )
texture = ExtResource( 10 )
texture_scale = 0.09
color = Color( 1, 0.933333, 0.513726, 1 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Light2D2"]
autoplay = "flash"
anims/RESET = SubResource( 37 )
anims/flash = SubResource( 38 )

[node name="Light2D3" type="Light2D" parent="."]
position = Vector2( 1059, 214 )
texture = ExtResource( 10 )
texture_scale = 0.09
color = Color( 1, 0.933333, 0.513726, 1 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Light2D3"]
autoplay = "flash"
anims/RESET = SubResource( 39 )
anims/flash = SubResource( 40 )
